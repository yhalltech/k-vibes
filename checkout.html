<!DOCTYPE html>
<html class="no-js" lang="zxx">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Kalenjin Vibes | Checkout</title>
  <meta name="author" content="Kalenjin Vibes">
  <meta name="description" content="Secure checkout for your purchases">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css">
  
  <!-- Tailwind CSS for header/footer consistency -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#BA0909',
            secondary: '#222',
            light: '#f8f9fa',
            dark: '#1a1a1a'
          }
        }
      }
    }
  </script>
  
  <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- Custom CSS Files -->
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="assets/css/header.css">
  <link rel="stylesheet" href="assets/css/footer.css">
  
  <!-- CHECKOUT PAGE CSS -->
  <link rel="stylesheet" href="assets/css/checkout.css">
  
  <style>
    /* WhatsApp Button Styles for Checkout Page */
    .whatsapp-button-checkout {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 1000;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #25D366, #128C7E);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      text-decoration: none;
    }
    
    .whatsapp-button-checkout:hover {
      transform: scale(1.1) translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    }
    
    .whatsapp-button-checkout img {
      width: 35px;
      height: 35px;
      filter: brightness(0) invert(1);
    }
    
    /* Breadcrumb Styles */
    .breadcumb-wrapper {
      position: relative;
      padding: 100px 0;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }
    
    .breadcumb-wrapper::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(186, 9, 9, 0.8));
    }
    
    .breadcumb-content {
      position: relative;
      z-index: 2;
      text-align: center;
      color: white;
    }
    
    .breadcumb-title {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    
    .breadcumb-menu {
      display: flex;
      justify-content: center;
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .breadcumb-menu li {
      margin: 0 10px;
    }
    
    .breadcumb-menu a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s;
    }
    
    .breadcumb-menu a:hover {
      color: #ffcccb;
    }
    
    .breadcumb-menu li:not(:last-child)::after {
      content: '/';
      margin-left: 10px;
      color: rgba(255, 255, 255, 0.5);
    }
    
    @media (max-width: 768px) {
      .breadcumb-wrapper {
        padding: 70px 0;
      }
      
      .breadcumb-title {
        font-size: 2rem;
      }
      
      .whatsapp-button-checkout {
        width: 50px;
        height: 50px;
        bottom: 15px;
        left: 15px;
      }
      
      .whatsapp-button-checkout img {
        width: 28px;
        height: 28px;
      }
    }
  </style>
</head>
<body>

  <!-- Include Header -->
  <div id="header-container"></div>

  <!-- Breadcrumb -->
  <div class="breadcumb-wrapper" style="background-image: url('assets/img/breadcumb/breadcumb-bg.jpg');">
    <div class="container mx-auto px-4">
      <div class="breadcumb-content">

      </div>
    </div>
  </div>

  <!-- Main Checkout Content -->
  <main class="checkout-container py-5">
    <div class="container mx-auto px-4">
      
      <!-- Progress Steps -->
      <div class="checkout-progress mb-8">
        <div class="checkout-steps">
          <div class="step completed">
            <div class="step-number">1</div>
            <div class="step-title">Cart</div>
          </div>
          <div class="step active">
            <div class="step-number">2</div>
            <div class="step-title">Checkout</div>
          </div>
          <div class="step">
            <div class="step-number">3</div>
            <div class="step-title">Payment</div>
          </div>
          <div class="step">
            <div class="step-number">4</div>
            <div class="step-title">Confirmation</div>
          </div>
        </div>
      </div>

      <!-- Continue Shopping Link -->
      <div class="continue-shopping mb-6">
        <a href="shop.html" class="back-link">
          <i class="fas fa-arrow-left"></i> Continue Shopping
        </a>
      </div>

      <!-- Checkout Content Grid -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Left Column: Cart Items -->
        <div class="lg:col-span-2">
          <!-- Cart Table -->
          <div class="cart-table-wrapper fade-in">
            <table class="cart_table">
              <thead>
                <tr>
                  <th class="cart-col-image">Image</th>
                  <th class="cart-col-product">Product</th>
                  <th class="cart-col-price">Price</th>
                  <th class="cart-col-quantity">Quantity</th>
                  <th class="cart-col-total">Total</th>
                  <th class="cart-col-remove">Action</th>
                </tr>
              </thead>
              <tbody>
                <!-- Cart Item 1 -->
                <tr class="cart_item">
                  <td class="cart-col-image">
                    <img src="https://via.placeholder.com/80x80/BA0909/fff?text=Product1" alt="Product 1">
                  </td>
                  <td class="cart-col-product">
                    <strong>Premium Headphones</strong>
                    <p class="product-description">Noise cancelling wireless headphones</p>
                  </td>
                  <td class="cart-col-price">$99.99</td>
                  <td class="cart-col-quantity">
                    <div class="quantity-controls">
                      <button class="quantity-btn minus">-</button>
                      <span class="item-quantity">1</span>
                      <button class="quantity-btn plus">+</button>
                    </div>
                  </td>
                  <td class="cart-col-total">$99.99</td>
                  <td class="cart-col-remove">
                    <button class="remove-item" title="Remove item">
                      <i class="fas fa-trash"></i>
                    </button>
                  </td>
                </tr>
                
                <!-- Cart Item 2 -->
                <tr class="cart_item">
                  <td class="cart-col-image">
                    <img src="https://via.placeholder.com/80x80/333/fff?text=Product2" alt="Product 2">
                  </td>
                  <td class="cart-col-product">
                    <strong>Smart Watch</strong>
                    <p class="product-description">Fitness tracker with heart rate monitor</p>
                  </td>
                  <td class="cart-col-price">$149.99</td>
                  <td class="cart-col-quantity">
                    <div class="quantity-controls">
                      <button class="quantity-btn minus">-</button>
                      <span class="item-quantity">1</span>
                      <button class="quantity-btn plus">+</button>
                    </div>
                  </td>
                  <td class="cart-col-total">$149.99</td>
                  <td class="cart-col-remove">
                    <button class="remove-item" title="Remove item">
                      <i class="fas fa-trash"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Right Column: Order Summary -->
        <div class="lg:col-span-1">
          <div class="checkout-summary fade-in">
            <h3 class="summary-title">Order Summary</h3>
            
            <div class="summary-row">
              <span>Subtotal</span>
              <span>$249.98</span>
            </div>
            
            <div class="summary-row">
              <span>Shipping</span>
              <span>$9.99</span>
            </div>
            
            <div class="summary-row">
              <span>Tax (8%)</span>
              <span>$20.00</span>
            </div>
            
            <div class="summary-row total">
              <span>Total</span>
              <span>$279.97</span>
            </div>

            <!-- Customer Information Form -->
            <div class="customer-info mt-6">
              <h4 class="mb-3" style="color: #333; font-weight: 600;">Customer Information</h4>
              <div class="space-y-3">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                  <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="Enter your name">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                  <input type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="your@email.com">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                  <input type="tel" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="+1234567890">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Shipping Address</label>
                  <textarea class="w-full px-3 py-2 border border-gray-300 rounded-md" rows="3" placeholder="Enter your shipping address"></textarea>
                </div>
              </div>
            </div>

            <!-- Checkout Button -->
            <div class="checkout-btn-container mt-6">
              <button class="checkout-btn" id="proceedToPayment">
                Proceed to Payment
                <i class="fas fa-lock ml-2"></i>
              </button>
            </div>

            <!-- Security Info -->
            <div class="security-info mt-4 text-center">
              <p class="text-sm text-gray-600">
                <i class="fas fa-shield-alt text-primary mr-1"></i>
                Your payment information is secure and encrypted
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty Cart State (Hidden by default) -->
      <!-- <div class="empty-cart" style="display: none;">
        <i class="fas fa-shopping-cart"></i>
        <h3>Your cart is empty</h3>
        <p>Looks like you haven't added any items to your cart yet.</p>
        <a href="shop.html" class="shop-link">Start Shopping</a>
      </div> -->

    </div>
  </main>

  <!-- Include Footer -->
  <div id="footer-container"></div>

  <!-- Scroll To Top -->
  <a href="#" class="scrollToTop scroll-btn fixed bottom-8 right-8 bg-primary text-white p-3 rounded-full shadow-lg hover:bg-red-800 transition-colors duration-300 z-50 hidden">
    <i class="fas fa-arrow-up"></i>
  </a>
  
  <!-- WhatsApp Button -->
  <a href="https://wa.me/+254797265275" class="whatsapp-button-checkout" target="_blank" title="Chat with us on WhatsApp">
    <img src="assets/img/WhatsApp.svg" alt="WhatsApp">
  </a>

  <!-- JavaScript Files -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Load Header and Footer -->
  <script>
    // Load header from partials folder
    fetch('partials/header.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('header-container').innerHTML = data;
        
        // Initialize mobile menu after header is loaded
        const mobileMenu = document.querySelector('.mobile-menu');
        const menuToggle = document.querySelector('.vs-menu-toggle');
        const closeBtn = document.querySelector('.menu-close');
        const overlay = document.querySelector('.menu-overlay');
        
        if (menuToggle && mobileMenu) {
          menuToggle.addEventListener('click', function() {
            mobileMenu.classList.add('active');
            document.body.style.overflow = 'hidden';
          });
        }
        
        if (closeBtn) {
          closeBtn.addEventListener('click', function() {
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
          });
        }
        
        if (overlay) {
          overlay.addEventListener('click', function() {
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
          });
        }
        
        // Close menu when clicking links
        const menuLinks = document.querySelectorAll('.menu-link');
        menuLinks.forEach(link => {
          link.addEventListener('click', function() {
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
          });
        });
      })
      .catch(error => console.error('Error loading header:', error));
      
    // Load footer from partials folder
    fetch('partials/footer.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('footer-container').innerHTML = data;
        
        // Initialize footer functionality
        const yearElements = document.querySelectorAll('.current-year');
        yearElements.forEach(element => {
          element.textContent = new Date().getFullYear();
        });
        
        // Newsletter form submission
        const newsletterForm = document.getElementById('newsletter-form');
        if (newsletterForm) {
          newsletterForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const emailInput = newsletterForm.querySelector('input[type="email"]');
            const submitBtn = newsletterForm.querySelector('button[type="submit"]');
            const email = emailInput.value.trim();
            
            // Simple email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
              alert('Please enter a valid email address');
              return;
            }
            
            // Show loading state
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Subscribing...';
            submitBtn.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
              // Save to localStorage
              localStorage.setItem('kalenjin_vibes_subscribed', JSON.stringify({
                email: email,
                date: new Date().toISOString()
              }));
              
              // Update UI
              emailInput.value = email;
              emailInput.disabled = true;
              submitBtn.innerHTML = '<i class="fas fa-check"></i> Subscribed';
              submitBtn.classList.add('bg-green-600', 'hover:bg-green-700');
              
              // Show success message
              alert('Successfully subscribed to our newsletter!');
            }, 1000);
          });
        }
        
        // Check if already subscribed
        const isSubscribed = localStorage.getItem('kalenjin_vibes_subscribed');
        if (isSubscribed) {
          const newsletterForm = document.getElementById('newsletter-form');
          if (newsletterForm) {
            const input = newsletterForm.querySelector('input[type="email"]');
            const button = newsletterForm.querySelector('button[type="submit"]');
            if (input && button) {
              const data = JSON.parse(isSubscribed);
              input.value = data.email;
              input.disabled = true;
              button.textContent = 'Subscribed âœ“';
              button.disabled = true;
              button.classList.add('bg-green-600', 'hover:bg-green-700');
            }
          }
        }
      })
      .catch(error => console.error('Error loading footer:', error));
  </script>
  
  <!-- Scroll to Top Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const scrollToTopBtn = document.querySelector('.scrollToTop');
      
      window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
          scrollToTopBtn.classList.remove('hidden');
        } else {
          scrollToTopBtn.classList.add('hidden');
        }
      });
      
      scrollToTopBtn.addEventListener('click', function(e) {
        e.preventDefault();
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    });
  </script>
  
  <!-- Main JS -->
  <script src="assets/js/main.js"></script>
  
  <!-- Shared Header / Cart JS -->
  <script src="assets/js/mobile-menu.js"></script>
  <script src="assets/js/cart.js"></script>
  
  <!-- CHECKOUT PAGE JAVASCRIPT -->
  <script>
    // Quantity controls
    document.querySelectorAll('.quantity-btn').forEach(button => {
      button.addEventListener('click', function() {
        const isPlus = this.classList.contains('plus');
        const quantityElement = this.parentNode.querySelector('.item-quantity');
        let quantity = parseInt(quantityElement.textContent);
        
        if (isPlus) {
          quantity++;
        } else if (quantity > 1) {
          quantity--;
        }
        
        quantityElement.textContent = quantity;
        updateCartTotals();
      });
    });

    // Remove item functionality
    document.querySelectorAll('.remove-item').forEach(button => {
      button.addEventListener('click', function() {
        const cartItem = this.closest('.cart_item');
        cartItem.classList.add('fade-out');
        setTimeout(() => {
          cartItem.remove();
          updateCartTotals();
          checkEmptyCart();
        }, 300);
      });
    });

    // Update cart totals
    function updateCartTotals() {
      const cartItems = document.querySelectorAll('.cart_item');
      let subtotal = 0;
      
      cartItems.forEach(item => {
        const price = parseFloat(item.querySelector('.cart-col-price').textContent.replace('$', ''));
        const quantity = parseInt(item.querySelector('.item-quantity').textContent);
        const total = price * quantity;
        
        // Update item total
        item.querySelector('.cart-col-total').textContent = '$' + total.toFixed(2);
        
        subtotal += total;
      });
      
      // Update summary
      const shipping = 9.99;
      const tax = subtotal * 0.08;
      const total = subtotal + shipping + tax;
      
      document.querySelectorAll('.summary-row')[0].querySelector('span:last-child').textContent = '$' + subtotal.toFixed(2);
      document.querySelectorAll('.summary-row')[2].querySelector('span:last-child').textContent = '$' + tax.toFixed(2);
      document.querySelectorAll('.summary-row')[3].querySelector('span:last-child').textContent = '$' + total.toFixed(2);
      
      // Update cart count in header
      document.querySelector('.cart-count-checkout').textContent = cartItems.length;
    }

    // Check if cart is empty
    function checkEmptyCart() {
      const cartItems = document.querySelectorAll('.cart_item');
      if (cartItems.length === 0) {
        // Show empty cart message
        document.querySelector('.cart-table-wrapper').style.display = 'none';
        document.querySelector('.checkout-summary').style.display = 'none';
        
        // Show empty cart state
        const emptyCart = document.createElement('div');
        emptyCart.className = 'empty-cart text-center py-10';
        emptyCart.innerHTML = `
          <i class="fas fa-shopping-cart text-6xl text-gray-300 mb-4"></i>
          <h3 class="text-2xl font-semibold text-gray-600 mb-2">Your cart is empty</h3>
          <p class="text-gray-500 mb-6">Looks like you haven't added any items to your cart yet.</p>
          <a href="shop.html" class="shop-link">Start Shopping</a>
        `;
        document.querySelector('.checkout-container .container').prepend(emptyCart);
      }
    }

    // Proceed to payment
    document.getElementById('proceedToPayment').addEventListener('click', function() {
      this.classList.add('loading');
      this.innerHTML = 'Processing... <i class="fas fa-spinner fa-spin"></i>';
      
      // Simulate validation and redirect
      setTimeout(() => {
        // Validate customer info
        const name = document.querySelector('input[placeholder="Enter your name"]').value;
        const email = document.querySelector('input[placeholder="your@email.com"]').value;
        const phone = document.querySelector('input[placeholder="+1234567890"]').value;
        const address = document.querySelector('textarea').value;
        
        if (!name || !email || !phone || !address) {
          alert('Please fill in all customer information fields');
          this.classList.remove('loading');
          this.innerHTML = 'Proceed to Payment <i class="fas fa-lock ml-2"></i>';
          return;
        }
        
        // Redirect to payments page
        window.location.href = 'payments.html';
      }, 1000);
    });

    // Initialize cart totals
    updateCartTotals();
  </script>

</body>
</html>